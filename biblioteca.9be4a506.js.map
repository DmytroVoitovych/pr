{"mappings":"iiBAEA,IAoCwCA,EApCxCC,EAAAC,EAAA,S,0BAIIC,EAyCJ,WACE,IAAMC,EAA0BC,aAAaC,QAAQ,eACjDC,EAAc,SACbH,EAGHG,EAAcH,EAFdC,aAAaG,QAAQ,cAAeD,GAItC,OAAOA,EAjDSE,GACdC,EAAO,EA+B6BV,EA9BTG,EA+BZQ,EAAAV,EAAA,CAAGW,EAAAC,KAAKC,iBAAiBC,UAClCC,KAAI,SAAAC,GACVC,QAAQC,IAAI,QAASF,EAAOG,QAAQC,KAAM,eAAgBrB,GACtDiB,EAAOG,QAAQC,OAASrB,GAC1BiB,EAAOK,UAAUC,IAAI,eAjC3BX,EAAAC,KAAKC,iBAAiBU,iBAAiB,SAUvC,SAAwBC,GACtB,IAAMC,EAAaD,EAAME,OAAOP,QAAQC,KACxC,GAAIK,IAAevB,EACjB,OAEFA,EAAcuB,EACdhB,EAAO,EACPL,aAAaG,QAAQ,cAAeL,GACpC,IAAMyB,EAAcvB,aAAaC,QAAQ,GAAeuB,OAAZ1B,IAC5C2B,EAAOC,KAAKC,MAAMJ,GAClBlB,EAAO,EACPuB,IAIiBtB,EAAAV,EAAA,CAAGW,EAAAC,KAAKC,iBAAiBC,UAClCC,KAAI,SAAAC,G,OAAUA,EAAOK,UAAUY,OAAO,kBAzBhDtB,EAAAC,KAAKsB,gBAAgBX,iBAAiB,SA8CtC,SAAgCC,GAC9B,IAAMW,EAAcX,EAAME,OAAOP,QAAQiB,KACzC,IAAKD,EACH,OAEF1B,EAAO4B,OAAOF,GAEdH,KACA,EAAAM,EAAAC,kBArDF5B,EAAAC,KAAK4B,SAASjB,iBAAiB,WAuE/B,SAAsBC,GACpBP,QAAQC,IAAI,gBACZD,QAAQC,IAAIhB,GACZ,IAAMuC,EAAcrC,aAAaC,QAAQ,GAAeuB,OAAZ1B,IAE5C2B,EAAOC,KAAKC,MAAMU,GAClBxB,QAAQC,IAAIW,GACZG,OAzEF,IAAMU,EAActC,aAAaC,QAAQ,GAAeuB,OAAZ1B,IACxC2B,EAAOC,KAAKC,MAAMW,GAiDtB,SAASV,IAEPrB,EAAAC,KAAK+B,YAAYC,UAAY,GAC7BjC,EAAAC,KAAKsB,gBAAgBU,UAAY,GACjC,IAAMC,EAAUhB,EAAKiB,QACnB,SAACC,EAAMC,G,OACLA,GApEuB,GAoEbvC,EAAO,IACjBuC,EArEuB,EAqEfvC,MAGZ,EAAA6B,EAAAW,mBACEJ,EACApC,EACAyC,KAAKC,KAAKtB,EAAKuB,OA3EU,IAc7BpB,I","sources":["src/partials/biblioteca/bibl.js"],"sourcesContent":["// корневой js для библиотеки\n//окуратно оставляет только основу\nimport { renderLibraryList, scrollToTop } from '../../js/container';\nimport { refs } from '../../js/refs';\n\nconst NUMBER_MOVIE_ON_PAGE = 6;\nlet activeGroup = getactiveGroup();\nlet page = 1; // watched or queued\naddClassSelectedOnActiveButton(activeGroup); //добавляю клас selected на активну групу\n\nrefs.buttonsContainer.addEventListener('click', onClickButtons);\nrefs.pagginationList.addEventListener('click', onClickPagginationList);\nrefs.backdrop.addEventListener('focusin', onCloseModal);\n// const ppp = document.querySelector('.modalV');\n// console.log(ppp);\n// ppp.addEventListener('focusin', event => console.log('1'));\n\nconst currentData = localStorage.getItem(`${activeGroup}`);\nlet data = JSON.parse(currentData);\nfetchDataLibrary();\nfunction onClickButtons(event) {\n  const selectData = event.target.dataset.lang;\n  if (selectData === activeGroup) {\n    return;\n  }\n  activeGroup = selectData;\n  page = 1;\n  localStorage.setItem('activeGroup', activeGroup);\n  const currentData = localStorage.getItem(`${activeGroup}`);\n  data = JSON.parse(currentData);\n  page = 1;\n  fetchDataLibrary(data);\n  toggleClassOnButtons(selectData);\n}\nfunction toggleClassOnButtons(currentPage) {\n  const buttons = [...refs.buttonsContainer.children];\n  buttons.map(button => button.classList.toggle('selected'));\n}\nfunction addClassSelectedOnActiveButton(activeGroup) {\n  const buttons = [...refs.buttonsContainer.children];\n  buttons.map(button => {\n    console.log('lang=', button.dataset.lang, 'activeGroup=', activeGroup);\n    if (button.dataset.lang === activeGroup) {\n      button.classList.add('selected');\n    }\n  });\n}\nfunction getactiveGroup() {\n  const checkStorageactiveGroup = localStorage.getItem('activeGroup');\n  let activeGroup = 'queued';\n  if (!checkStorageactiveGroup) {\n    localStorage.setItem('activeGroup', activeGroup);\n  } else {\n    activeGroup = checkStorageactiveGroup;\n  }\n  return activeGroup;\n}\nfunction onClickPagginationList(event) {\n  const currentPage = event.target.dataset.page;\n  if (!currentPage) {\n    return;\n  }\n  page = Number(currentPage);\n\n  fetchDataLibrary();\n  scrollToTop();\n}\nfunction fetchDataLibrary() {\n  // console.log(page);\n  refs.galleryList.innerHTML = '';\n  refs.pagginationList.innerHTML = '';\n  const newData = data.filter(\n    (item, index) =>\n      index >= (page - 1) * NUMBER_MOVIE_ON_PAGE &&\n      index < page * NUMBER_MOVIE_ON_PAGE\n  );\n  // console.log(newData);\n  renderLibraryList(\n    newData,\n    page,\n    Math.ceil(data.length / NUMBER_MOVIE_ON_PAGE)\n  );\n}\nfunction onCloseModal(event) {\n  console.log('testtesttest');\n  console.log(activeGroup);\n  const currentData = localStorage.getItem(`${activeGroup}`);\n\n  data = JSON.parse(currentData);\n  console.log(data);\n  fetchDataLibrary();\n}\n"],"names":["activeGroup1","$8nrFW","parcelRequire","$b4748d14ff43be95$var$activeGroup","checkStorageactiveGroup","localStorage","getItem","activeGroup2","setItem","$b4748d14ff43be95$var$getactiveGroup","$b4748d14ff43be95$var$page","$parcel$interopDefault","$4Nugj","refs","buttonsContainer","children","map","button","console","log","dataset","lang","classList","add","addEventListener","event","selectData","target","currentData1","concat","$b4748d14ff43be95$var$data","JSON","parse","$b4748d14ff43be95$var$fetchDataLibrary","toggle","pagginationList","currentPage","page","Number","$g9G2c","scrollToTop","backdrop","currentData2","$b4748d14ff43be95$var$currentData","galleryList","innerHTML","newData","filter","item","index","renderLibraryList","Math","ceil","length"],"version":3,"file":"biblioteca.9be4a506.js.map"}