{"mappings":"iiBACA,IAkCwCA,EAlCxCC,EAAAC,EAAA,S,0BAIIC,EAuCkD,WACpD,IAAMC,EAA0BC,aAAaC,QAAQ,eACjDC,EAAc,SACbH,EAGHG,EAAcH,EAFdC,aAAaG,QAAQ,cAAeD,GAItC,OAAOA,EA/CSE,GACdC,EAAO,EA2DX,SAASC,IACPC,EAAAC,KAAKC,YAAYC,UAAY,GAC7BH,EAAAC,KAAKG,gBAAgBD,UAAY,GACjC,IAAME,EAAUC,KAAKC,QACnB,SAACC,EAAMC,G,OACLA,GAlEuB,GAkEbX,EAAO,IACjBW,EAnEuB,EAmEfX,MAEZ,EAAAY,EAAAC,mBACEN,EACAP,EACAc,KAAKC,KAAKP,KAAKQ,OAxEU,IAuF7B,SAASC,IACP,IAAMC,EAAcvB,aAAaC,QAAQ,GAAeuB,OAAZ1B,IAC5C,OAAO2B,KAAKC,MAAMH,GA1DoB5B,EA5BTG,EA6BZ6B,EAAA/B,EAAA,CAAGW,EAAAC,KAAKoB,iBAAiBC,UAClCC,KAAI,SAAAC,GACNA,EAAOC,QAAQC,OAAStC,GAC1BoC,EAAOG,UAAUC,IAAI,eA9B3B5B,EAAAC,KAAKoB,iBAAiBQ,iBAAiB,SAOf,SAAAC,GACtB,IAAMC,EAAaD,EAAME,OAAOP,QAAQC,KACxC,GAAIK,IAAexC,EACjB,OAEFA,EAAcwC,EACdjC,EAAO,EACPL,aAAaG,QAAQ,cAAeL,GACpCe,KAAOS,IACPjB,EAAO,EACPC,EAAiBO,MAKAc,EAAA/B,EAAA,CAAGW,EAAAC,KAAKoB,iBAAiBC,UAClCC,KAAI,SAAAC,G,OAAUA,EAAOG,UAAUM,OAAO,kBAtBhDjC,EAAAC,KAAKG,gBAAgByB,iBAAiB,SA6CG,SAATC,GAC9B,IAAMI,EAAcJ,EAAME,OAAOP,QAAQU,KACzC,IAAKD,EACH,OAEFpC,EAAOsC,OAAOF,GACdnC,KACA,EAAAW,EAAA2B,kBAnDFrC,EAAAC,KAAKqC,SAAST,iBAAiB,WAqET,WACpBvB,KAAOS,IACHT,KAAKQ,OA9EkB,GA8EgB,IACzCyB,QAAQC,IAAI,QACC,IAAT1C,IACFA,GAAQ,IAGZC,OA3EFO,KAAOS,IACPhB,I","sources":["src/partials/biblioteca/bibl.js"],"sourcesContent":["// корневой js для библиотеки\nimport { renderLibraryList, scrollToTop } from '../../js/container';\nimport { refs } from '../../js/refs';\n\nconst NUMBER_MOVIE_ON_PAGE = 6; //кількість фільмів на сторінку\nlet activeGroup = getActiveGroup();\nlet page = 1; // watched or queued\naddClassSelectedOnActiveButton(activeGroup); //добавляю клас selected на активну групу\n\nrefs.buttonsContainer.addEventListener('click', onClickButtons);\nrefs.pagginationList.addEventListener('click', onClickPagginationList);\nrefs.backdrop.addEventListener('focusin', onCloseModal);\n\ndata = getDataActiveGroup();\nfetchDataLibrary();\n//клік по кнопкам вибору групи\nfunction onClickButtons(event) {\n  const selectData = event.target.dataset.lang;\n  if (selectData === activeGroup) {\n    return;\n  }\n  activeGroup = selectData;\n  page = 1;\n  localStorage.setItem('activeGroup', activeGroup);\n  data = getDataActiveGroup();\n  page = 1;\n  fetchDataLibrary(data);\n  toggleClassOnButtons(selectData);\n}\n//тоглим класи на кнопках при іншому виборі\nfunction toggleClassOnButtons(currentPage) {\n  const buttons = [...refs.buttonsContainer.children];\n  buttons.map(button => button.classList.toggle('selected'));\n}\n// добавляєм клас selected для активної групи\nfunction addClassSelectedOnActiveButton(activeGroup) {\n  const buttons = [...refs.buttonsContainer.children];\n  buttons.map(button => {\n    if (button.dataset.lang === activeGroup) {\n      button.classList.add('selected');\n    }\n  });\n}\n// отримуємо активну групу з локалсторадж інакше ставимо активну queued\nfunction getActiveGroup() {\n  const checkStorageactiveGroup = localStorage.getItem('activeGroup');\n  let activeGroup = 'queued';\n  if (!checkStorageactiveGroup) {\n    localStorage.setItem('activeGroup', activeGroup);\n  } else {\n    activeGroup = checkStorageactiveGroup;\n  }\n  return activeGroup;\n}\n//обробляється подія при виборі кнопки пагінації\nfunction onClickPagginationList(event) {\n  const currentPage = event.target.dataset.page;\n  if (!currentPage) {\n    return;\n  }\n  page = Number(currentPage);\n  fetchDataLibrary();\n  scrollToTop();\n}\n\nfunction fetchDataLibrary() {\n  refs.galleryList.innerHTML = '';\n  refs.pagginationList.innerHTML = '';\n  const newData = data.filter(\n    (item, index) =>\n      index >= (page - 1) * NUMBER_MOVIE_ON_PAGE &&\n      index < page * NUMBER_MOVIE_ON_PAGE\n  );\n  renderLibraryList(\n    newData,\n    page,\n    Math.ceil(data.length / NUMBER_MOVIE_ON_PAGE)\n  );\n}\n//подія при закриті модалки\nfunction onCloseModal() {\n  data = getDataActiveGroup();\n  if (data.length % NUMBER_MOVIE_ON_PAGE === 0) {\n    console.log('ntcn');\n    if (page !== 1) {\n      page -= 1;\n    }\n  }\n  fetchDataLibrary();\n}\n//отримуємо дані з локалсторадж активної групи\nfunction getDataActiveGroup() {\n  const currentData = localStorage.getItem(`${activeGroup}`);\n  return JSON.parse(currentData);\n}\n"],"names":["activeGroup1","$8nrFW","parcelRequire","$b4748d14ff43be95$var$activeGroup","checkStorageactiveGroup","localStorage","getItem","activeGroup2","setItem","$b4748d14ff43be95$var$getActiveGroup","$b4748d14ff43be95$var$page","$b4748d14ff43be95$var$fetchDataLibrary","$4Nugj","refs","galleryList","innerHTML","pagginationList","newData","data","filter","item","index","$g9G2c","renderLibraryList","Math","ceil","length","$b4748d14ff43be95$var$getDataActiveGroup","currentData","concat","JSON","parse","$parcel$interopDefault","buttonsContainer","children","map","button","dataset","lang","classList","add","addEventListener","event","selectData","target","toggle","currentPage","page","Number","scrollToTop","backdrop","console","log"],"version":3,"file":"biblioteca.6dbfb029.js.map"}